parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zcNd":[function(require,module,exports) {
"use strict";var t=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var a=arguments[e],s=0,c=a.length;s<c;s++,r++)n[r]=a[s];return n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Canvas=void 0;var e=function(){function e(t){this.canvas=document.getElementById(t),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d")}return Object.defineProperty(e.prototype,"center",{get:function(){return[this.canvas.width/2,this.canvas.height/2]},enumerable:!1,configurable:!0}),e.prototype.animate=function(t){var e=this,i=performance.now();requestAnimationFrame(function n(){var r=performance.now(),a=(r-i)/1e3;i=r;var s=!1;e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),t(a,function(){return s=!0}),s||requestAnimationFrame(n)})},e.prototype.drawCircle=function(e,i){var n;this.ctx.fillStyle="white",this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.beginPath(),(n=this.ctx).arc.apply(n,t(e,[i,0,2*Math.PI])),this.ctx.fill(),this.ctx.stroke()},e.prototype.drawText=function(e,i){var n;this.ctx.fillStyle="black",this.ctx.font="20px sans-serif",this.ctx.textAlign="center",this.ctx.textBaseline="middle",(n=this.ctx).fillText.apply(n,t([i],e))},e.prototype.drawLine=function(t,e){var i,n;this.ctx.strokeStyle="black",this.ctx.lineWidth=3,this.ctx.beginPath(),(i=this.ctx).moveTo.apply(i,t),(n=this.ctx).lineTo.apply(n,e),this.ctx.stroke()},e.prototype.drawParallelLines=function(t,e,i){var n,r;void 0===i&&(i=2),this.ctx.beginPath(),(n=this.ctx).moveTo.apply(n,t),(r=this.ctx).lineTo.apply(r,e);for(var a=3*(2*i-1),s=!0;a>0;a-=6,s=!s)this.ctx.strokeStyle=s?"black":"white",this.ctx.lineWidth=a,this.ctx.stroke()},e}();exports.Canvas=e;
},{}],"uIOH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elementInfo=exports.shellCapacities=exports.atomicNumbers=exports.elements=void 0,exports.elements=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca"],exports.atomicNumbers={};for(var e=0;e<exports.elements.length;e++){var t=exports.elements[e];exports.atomicNumbers[t]=e+1}exports.shellCapacities=[2,8,8,18,18],exports.elementInfo={};for(var o=0,r=exports.elements;o<r.length;o++){t=r[o];var s=exports.atomicNumbers[t],i=[],l=void 0,n=void 0,p=void 0,a=void 0;for(p=0,a=s;a>0;p++){if(!(l=exports.shellCapacities[p]))throw new Error("Element "+t+" too big");n=Math.min(a,l),i.push(n),a-=n}var m=n,x=m>l/2?l-m:m;exports.elementInfo[t]={period:p+1,electronConfiguration:i,valenceElectrons:m,requiredBonds:x}}
},{}],"zrKI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Atom=void 0;var e=require("./periodic-table"),t=function(){function t(e,t){this.symbol=e,this.position=t}return t.prototype.draw=function(e){e.drawCircle(this.position,20),e.drawText(this.position,this.symbol)},Object.defineProperty(t.prototype,"atomicNumber",{get:function(){return e.atomicNumbers[this.symbol]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredBonds",{get:function(){return e.elementInfo[this.symbol].requiredBonds},enumerable:!1,configurable:!0}),t}();exports.Atom=t;
},{"./periodic-table":"uIOH"}],"hXCS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bond=void 0;var t=function(){function t(t,o,i){this.atom1=t,this.atom2=o,this.count=i}return t.prototype.draw=function(t){t.drawParallelLines(this.atom1.position,this.atom2.position,this.count)},t}();exports.Bond=t;
},{}],"eDgl":[function(require,module,exports) {
"use strict";function t(t,r){var e=r[0]-t[0],o=r[1]-t[1];return Math.sqrt(e*e+o*o)}function r(t,r){return[t[0]+r[0],t[1]+r[1]]}function e(t,r){return[t[0]-r[0],t[1]-r[1]]}function o(t,r){return[t*r[0],t*r[1]]}function s(t){return o(1/Math.sqrt(t[0]*t[0]+t[1]*t[1]),t)}function n(t,r){var e=r[0]-t[0],o=r[1]-t[1];return e>0&&e>Math.abs(o)}function u(t,r){var e=r[0]-t[0],o=r[1]-t[1];return e<0&&-e>Math.abs(o)}function a(t,r){var e=r[0]-t[0],o=r[1]-t[1];return o>0&&o>Math.abs(e)}function p(t,r){var e=r[0]-t[0],o=r[1]-t[1];return o<0&&-o>Math.abs(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.above=exports.below=exports.leftOf=exports.rightOf=exports.normV=exports.scaleV=exports.subV=exports.addV=exports.dist=void 0,exports.dist=t,exports.addV=r,exports.subV=e,exports.scaleV=o,exports.normV=s,exports.rightOf=n,exports.leftOf=u,exports.below=a,exports.above=p;
},{}],"wktd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Molecule=void 0;var t=require("./atom"),o=require("./bond"),r=require("./math"),n=50,e=100,s=function(){function s(){this.atoms=[],this.bonds=[],this.bondMap=new Map}return s.fromMolecularFormula=function(o,r){for(var n=s.parseFormula(o),e=new s,i=0,a=n;i<a.length;i++){var u=a[i];e.addAtom(new t.Atom(u,r))}return e.autoBond(),e},s.fromSimpleStructuralFormula=function(o,r){for(var n,e=s.parseFormula(o).map(function(o){return new t.Atom(o,r)}),i=new s,a=[],u=0,d=e;u<d.length;u++){var h=d[u];i.addAtom(h),(null==n?void 0:n.requiredBonds)>(null==h?void 0:h.requiredBonds)?a.push([n,h]):(n&&i.bond(n,h),n=h)}n=null;for(var p=0,f=a;p<f.length;p++){var l=f[p],c=l[0],m=l[1];n&&i.totalBonds(n)<n.requiredBonds?i.bond(n,m):(i.bond(c,m),n=m)}return i.addExtraBonds(),i},s.fromStructuralFormula=function(t,o){var r=this.parseFormulaParts(t);return this.fromStructuralFormulaParts(r,o)},s.fromStructuralFormulaParts=function(t,o){var r=this;return"string"==typeof t?this.fromSimpleStructuralFormula(t,o):t.map(function(t){return r.fromStructuralFormulaParts(t,[o[0]*Math.random(),o[1]*Math.random()])}).reduce(function(t,o){return t.join(o)})},s.prototype.join=function(t){var o=this.freeAtom,r=t.freeAtom;return this.merge(t),this.bond(o,r),this},Object.defineProperty(s.prototype,"freeAtom",{get:function(){for(var t=0,o=this.atoms;t<o.length;t++){var r=o[t];if(this.totalBonds(r)<r.requiredBonds)return r}},enumerable:!1,configurable:!0}),s.prototype.merge=function(t){this.atoms=this.atoms.concat(t.atoms),this.bonds=this.bonds.concat(t.bonds);for(var o=0,r=t.atoms;o<r.length;o++){var n=r[o];this.bondMap.set(n,[])}for(var e=0,s=t.bonds;e<s.length;e++){var i=s[e];this.bondMap.get(i.atom1).push(i),this.bondMap.get(i.atom2).push(i)}return this},s.parseFormulaParts=function(t){for(var o={parts:[],currentPart:""},r=[],n=0;n<t.length;){var e=t[n++];switch(e){case"(":o.parts.push(o.currentPart),o.currentPart="",r.push(o),o={parts:[],currentPart:""};break;case")":o.parts.push(o.currentPart);var s=o;(o=r.pop()).parts.push(s.parts);break;default:o.currentPart+=e}}if(r.length>0)throw new Error("");return o.parts.push(o.currentPart),o.parts},s.parseFormula=function(t){for(var o=[],r=0;r<t.length;){for(var n=t[r++],e="";r<t.length&&i(t[r]);)n+=t[r++];for(;r<t.length&&a(t[r]);)e+=t[r++];for(var s=+e||1,u=0;u<s;u++)o.push(n)}return o},s.prototype.log=function(){console.group("ATOMS:"),console.table(this.atoms),console.groupEnd(),console.group("BONDS:"),console.table(this.bonds),console.groupEnd()},s.prototype.draw=function(t){for(var o=0,r=this.bonds;o<r.length;o++){r[o].draw(t)}for(var n=0,e=this.atoms;n<e.length;n++){e[n].draw(t)}},s.prototype.addAtom=function(t){this.atoms.push(t),this.bondMap.set(t,[])},s.prototype.bond=function(t,r,s){void 0===s&&(s=1);var i=this.findBond(t,r);if(i)i.count+=s;else{var a="H"===t.symbol||"H"===r.symbol?n:e;r.position=this.getNextBondingPosition(t,a);var u=new o.Bond(t,r,s);this.bonds.push(u),this.bondMap.get(t).push(u),this.bondMap.get(r).push(u)}},s.prototype.findBond=function(t,o){return this.bondMap.get(t).find(function(t){return t.atom1===o||t.atom2===o})},s.prototype.getNextBondingPosition=function(t,o){for(var n=[],e=0,s=this.bondMap.get(t);e<s.length;e++){var i=s[e];i.atom1!==t&&n.push(i.atom1),i.atom2!==t&&n.push(i.atom2)}var a=t.position,u=a[0],d=a[1];if(!n.some(function(o){return r.rightOf(t.position,o.position)}))return[u+o,d];if(!n.some(function(o){return r.leftOf(t.position,o.position)}))return[u-o,d];if(!n.some(function(o){return r.below(t.position,o.position)}))return[u,d+o];if(!n.some(function(o){return r.above(t.position,o.position)}))return[u,d-o];throw new Error("Trying to over-bond atom")},s.prototype.autoBond=function(){this.atoms.sort(function(t,o){return o.atomicNumber-t.atomicNumber}),this.atoms.sort(function(t,o){return o.requiredBonds-t.requiredBonds});for(var t=this.atoms[0],o=this.atoms.slice(1),r=0,n=o;r<n.length;r++){var e=n[r];this.bond(t,e)}this.addExtraBonds();for(var s=0;!this.hasRequiredBonds;s++){if(s>100)throw new Error("Auto bonding taking too long");for(var i=0,a=o;i<a.length;i++){if((e=a[i]).requiredBonds>this.totalBonds(e)){this.bond(t,e);break}}}},Object.defineProperty(s.prototype,"hasRequiredBonds",{get:function(){for(var t=0,o=0,r=this.atoms;o<r.length;o++){var n=r[o],e=this.totalBonds(n);e!==n.requiredBonds&&(e>n.requiredBonds&&console.warn(n.symbol+" atom is over-bonded"),t+=n.requiredBonds-e)}return 0===t},enumerable:!1,configurable:!0}),s.prototype.addExtraBonds=function(){for(var t=0;!this.hasRequiredBonds;t++){if(t>10)return void console.warn("Auto bonding taking too long, skipping");for(var o=0,r=this.bonds;o<r.length;o++){var n=r[o];if(this.totalBonds(n.atom1)<n.atom1.requiredBonds&&this.totalBonds(n.atom2)<n.atom2.requiredBonds){this.bond(n.atom1,n.atom2);break}}}},s.prototype.totalBonds=function(t){return this.bondMap.get(t).reduce(function(t,o){return t+o.count},0)},s.prototype.center=function(t){var o=this.atoms.reduce(function(t,o){return t+o.position[0]},0)/this.atoms.length,r=this.atoms.reduce(function(t,o){return t+o.position[1]},0)/this.atoms.length;if(!t)return[o,r];for(var n=t[0]-o,e=t[1]-r,s=0,i=this.atoms;s<i.length;s++){var a=i[s];a.position[0]+=n,a.position[1]+=e}return t},s}();function i(t){return t===t.toLowerCase()&&t!==t.toUpperCase()}function a(t){return"1234567890".includes(t)}exports.Molecule=s;
},{"./atom":"zrKI","./bond":"hXCS","./math":"eDgl"}],"nrAa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simulate=void 0;var o=require("./math"),i=50;function t(t,s){for(var n=0,e=t.atoms;n<e.length;n++)for(var r=e[n],a=0,p=t.atoms;a<p.length;a++){if(r!==(c=p[a])){var d=o.dist(r.position,c.position),f=o.normV(o.subV(r.position,c.position)),l=o.scaleV(500/(d*d),f);r.position=o.addV(r.position,l)}}for(var m=0,u=t.atoms;m<u.length;m++){r=u[m];for(var v=0,V=t.atoms;v<V.length;v++){var c;if(r!==(c=V[v]))if(t.findBond(r,c)){d=o.dist(r.position,c.position),f=o.normV(o.subV(r.position,c.position)),l=o.scaleV(.2*(i-d),f);r.position=o.addV(r.position,l)}}}}exports.simulate=t;
},{"./math":"eDgl"}],"EVxB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./canvas"),r=require("./molecule"),a=require("./simulate"),t=new e.Canvas("main-canvas"),u=r.Molecule.fromStructuralFormula("CH3C(CH2CH3)CHCHCOHO",t.center);u.log(),t.animate(function(e){a.simulate(u,e),u.center(t.center),u.draw(t)});
},{"./canvas":"zcNd","./molecule":"wktd","./simulate":"nrAa"}]},{},["EVxB"], null)
//# sourceMappingURL=/molecules/app.d334ed94.js.map